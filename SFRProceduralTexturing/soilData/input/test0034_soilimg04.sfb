
BitmapTexture01 = SFBitmapTextureData{
	bitmap = SFFunction2DBitmapData{
		width = 400 \\ height = 400
		function as SFFunctionRandomizerData{
			seed = 3
		}
	}
	textureModel = linearTextureModel
}

BitmapTexture02 = SFBitmapTextureData{
	bitmap = SFBitmapArrayData{
		width=4 \\ height=4 \\ type=GRAY8
		bitmap=(255,255,255,0,0,255,0,0,0,0,255,0,0,0,0,0)
	}
	textureModel = linearTextureModel
}



StoneSurface as SFSurfaceData{
	valuesData = SFVertexListDataUnit8{
		vertices = (0.0,0.0,0.0) (-0.2,-0.5,0.0) (0.3,-0.6,0.0) (0.5,0.1,0.1) (0.4,0.0,+0.1) (0.1,0.1,+0.1)
	}
	surfaceFunction as SFRadialSurfaceFunctionData{
		firstCurve as SFBasisSpline2Data{
			vertices = (0,1,2)
			closed = 1
		}
		secondCurve as SFBasisSpline2Data{
			vertices = (3,4,5,0)
		}
	}
}

			
Stone01 as SFObjectModelData{
	transform = SFTranslateAndScaleFixed16Data{
		y = -0.5
		scale = 2.5
	}
	geometry = SFQuadsSurfaceGeometryData{
		NuNv = (6,6)
		primitive = Triangle2PNTxO
		surface == StoneSurface
	}
	transformComponent as SFProgramAssetData{
		program = BasicPNTx0Transform
	}
	materialComponent as SFProgramAssetData{
		program = Turbulence
		structures =  (400)(1)(0.6)(1,1,1)(0.95,0.95,0.95)
		textures = BitmapTexture01
	}
}	

RectangleObjectRepeater as SFArrayTransformRepeaterData{
	transforms+=SFTranslateAndScaleFixed16Data{
		x = -0.3 \\ y = 0.4 \\ scale = 0.1
	}
	transforms+=SFTranslateAndScaleFixed16Data{
		x = -0.08 \\ y = 0.13 \\ scale = 0.15
	}
	transforms+=SFTranslateAndScaleFixed16Data{
		x = -0.3 \\ y = 0 \\ scale = 0.2
	}
	transforms+=SFTranslateAndScaleFixed16Data{
		x = -0.3 \\ y = 0.25 \\ scale = 0.09
	}
}


Renderer00002 as SFRendererData{
	light as SFProgramAssetData{
		program = BasicLSPN2
		structures= (1,1,1)(-0.6,0,-0.7)
		viewSize = 512
	}
}


RenderedTexture0002 as SFRenderingAlgorithmData{
	stack = SFRenderedTextureStackData{
		textures = SFRenderedTextureData{
			size = (512,512)
			useDepth = false
			textureModel = linearTextureModel
		}
	}
	process = SFRenderingProcessData{
		drawables as SFRenderedTextureStackPushData 
		drawables += SFRenderingProcessData{
			drawables = SFStateDrawableData{
				state = MainViewerSetup
			}
			drawables += SFImageModelData{
				materialComponent = SFProgramAssetData{
					program = Turbulence
					structures = (400)(1)(0.6)(1,1,1)(0.95,0.95,0.95)
					textures = BitmapTexture01
				}
				lightComponent = SFProgramAssetData{
					program = BasicColor
				}
			}
			drawables += SFRepeatingDrawableArrayData{
				renderer == Renderer00002
				nodes == Stone01
				repeater == RectangleObjectRepeater
			}
		}
		drawables += SFRenderedTextureStackPopData 
	}
}

RenderedTextureViewer0002 as SFImageModelData{
	materialComponent = SFProgramAssetData{
		program = TexturedMat
		textures = RenderedTexture0002
	}
	lightComponent = SFProgramAssetData{
		program = BasicColor
	}
}